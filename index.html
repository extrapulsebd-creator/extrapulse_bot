<!DOCTYPE html>
<html lang="EN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ELITE EARN PRO - COMPLETE</title>
    
    <script id="ad-script" src="https://libtl.com/sdk.js" data-zone="10546022" data-sdk="show_10546022"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <style>
        :root { --p: #6366f1; --s: #f43f5e; --acc: #fbbf24; --bg: #f8fafc; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Plus Jakarta Sans', sans-serif; text-transform: uppercase; font-weight: 800; }
        body { background: var(--bg); color: #1e293b; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        .header { padding: 15px 20px; display: flex; align-items: center; justify-content: space-between; background: #fff; border-bottom: 1px solid #e2e8f0; }
        .u-pic { width: 42px; height: 42px; border-radius: 50%; border: 2px solid var(--p); }
        .bal-chip { background: linear-gradient(135deg, #fbbf24, #f59e0b); padding: 8px 15px; border-radius: 20px; color: #fff; font-size: 13px; display: flex; align-items: center; gap: 6px; }

        #view { flex: 1; overflow-y: auto; padding: 15px 20px 100px; }
        .tab { display: none; } .tab.active { display: block; animation: fadeInUp 0.4s ease; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; } }

        .card-main { background: #fff; border-radius: 24px; padding: 22px; border: 1px solid #e2e8f0; margin-bottom: 20px; }
        .grid-tasks { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .task-box { background: #fff; border-radius: 18px; padding: 20px 10px; text-align: center; border: 1px solid #e2e8f0; cursor: pointer; transition: 0.2s; }
        .task-box i { font-size: 24px; color: var(--p); margin-bottom: 8px; display: block; }
        .task-box:active { transform: scale(0.96); }

        .btn-action { background: var(--p); color: #fff; border: none; padding: 16px; border-radius: 16px; width: 100%; font-size: 13px; cursor: pointer; margin-top: 10px; }
        .nav-bar { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; border-top: 1px solid #e2e8f0; display: flex; padding: 10px 5px 25px; justify-content: space-around; }
        .nav-item { text-align: center; color: #94a3b8; text-decoration: none; font-size: 10px; }
        .nav-item i { font-size: 22px; display: block; margin-bottom: 4px; }
        .nav-item.active { color: var(--p); }

        #timer-display { background: #fff1f2; color: var(--s); padding: 10px; border-radius: 10px; margin-top: 10px; display: none; }
        .ref-box { background: #f1f5f9; padding: 15px; border-radius: 12px; border: 1px dashed #cbd5e1; font-size: 12px; margin-top: 10px; cursor: pointer; }
    </style>
</head>
<body>

    <header class="header">
        <div style="display:flex; align-items:center; gap:10px;">
            <img src="" id="top-pic" class="u-pic">
            <b id="top-name">USER</b>
        </div>
        <div class="bal-chip"><i class="fas fa-coins"></i> <span id="u-bal">0</span></div>
    </header>

    <main id="view">
        <div id="home" class="tab active">
            <div class="card-main" style="background: linear-gradient(135deg, #6366f1, #a855f7); color:#fff; border:none;">
                <h3>DAILY BONUS</h3>
                <p style="font-size:11px; margin:5px 0 15px; opacity:0.9;">CLAIM YOUR DAILY REWARD NOW!</p>
                <button class="btn-action" style="background:#fff; color:var(--p);" onclick="claimDaily()">CLAIM BONUS</button>
            </div>

            <div class="grid-tasks">
                <div class="task-box" onclick="tab('sads', 'n-sads')"><i class="fas fa-play-circle"></i><b>S-ADS</b><br><small>+10 COINS</small></div>
                <div class="task-box" onclick="tab('web', 'n-web')"><i class="fas fa-globe"></i><b>WEB-TASK</b><br><small>+50 COINS</small></div>
                <div class="task-box" onclick="tab('refer', 'n-refer')"><i class="fas fa-users"></i><b>REFER</b><br><small>EARN MORE</small></div>
                <div class="task-box" onclick="tab('wallet', 'n-wallet')"><i class="fas fa-wallet"></i><b>WALLET</b><br><small>CASHOUT</small></div>
            </div>
        </div>

        <div id="sads" class="tab">
            <div class="card-main">
                <h3>WATCH & EARN</h3>
                <p style="font-size:12px; color:#64748b; margin-bottom:15px;">WATCH ADS TO EARN 10 COINS EVERY TIME.</p>
                <button class="btn-action" onclick="runSAds()">WATCH AD</button>
            </div>
        </div>

        <div id="web" class="tab">
            <div class="card-main">
                <h3>ARTICLE READING</h3>
                <p style="font-size:12px; color:#64748b; margin-bottom:15px;">VISIT OUR PARTNER SITE FOR 60s TO GET 50 COINS.</p>
                <div id="timer-display">PLEASE WAIT: <span id="w-timer">60</span>s</div>
                <button class="btn-action" id="web-btn" onclick="runWebTask()">START TASK</button>
            </div>
        </div>

        <div id="refer" class="tab">
            <div class="card-main">
                <h3>REFER & EARN</h3>
                <p style="font-size:12px; color:#64748b; margin-bottom:15px;">INVITE FRIENDS AND GET 100 COINS ONCE THEY JOIN!</p>
                <div class="ref-box" onclick="copyRef()">
                    CLICK TO COPY YOUR LINK:<br>
                    <b id="ref-link">---</b>
                </div>
            </div>
        </div>

        <div id="wallet" class="tab">
            <div class="card-main">
                <h3>WITHDRAW</h3>
                <input type="number" id="w-amount" placeholder="MIN 500 COINS" style="width:100%; padding:15px; border-radius:12px; border:1px solid #ddd; margin-bottom:10px;">
                <button class="btn-action" style="background:#10b981;" onclick="doWithdraw()">WITHDRAW NOW</button>
            </div>
        </div>
    </main>

    <nav class="nav-bar">
        <a href="javascript:void(0)" class="nav-item active" onclick="tab('home',this)"><i class="fas fa-home"></i><span>HOME</span></a>
        <a href="javascript:void(0)" id="n-sads" class="nav-item" onclick="tab('sads',this)"><i class="fas fa-play-circle"></i><span>ADS</span></a>
        <a href="javascript:void(0)" id="n-web" class="nav-item" onclick="tab('web',this)"><i class="fas fa-globe"></i><span>WEB</span></a>
        <a href="javascript:void(0)" id="n-refer" class="nav-item" onclick="tab('refer',this)"><i class="fas fa-users"></i><span>REFER</span></a>
        <a href="javascript:void(0)" id="n-wallet" class="nav-item" onclick="tab('wallet',this)"><i class="fas fa-wallet"></i><span>WALLET</span></a>
    </nav>

    <script>
        const cfg = { apiKey: "AIzaSyAuS8RpixezmpBpIlB0YQURpG6s-0LEvKM", databaseURL: "https://extra-pulse-default-rtdb.firebaseio.com" };
        firebase.initializeApp(cfg); const db = firebase.database(); 
        const tg = window.Telegram.WebApp; tg.expand();
        const user = tg.initDataUnsafe.user || { id: "000", first_name: "GUEST" };
        let uData = {};

        function startApp() {
            db.ref('users/'+user.id).on('value', s => {
                uData = s.val() || { balance: 0, last_bonus: 0 };
                document.getElementById('u-bal').innerText = uData.balance;
                document.getElementById('top-name').innerText = user.first_name;
                document.getElementById('top-pic').src = user.photo_url || `https://ui-avatars.com/api/?name=${user.first_name}`;
                document.getElementById('ref-link').innerText = "https://t.me/YOUR_BOT_USERNAME?start=" + user.id;
            });

            // চেক রেফারেল (যদি নতুন ইউজার হয়)
            const urlParams = new URLSearchParams(window.location.search);
            const refBy = urlParams.get('start');
            if(refBy && refBy !== user.id.toString()) {
                db.ref('users/'+user.id).once('value', s => {
                    if(!s.exists()) { // শুধু নতুন ইউজারের জন্য রেফার বোনাস
                        db.ref('users/'+refBy+'/balance').transaction(b => (b||0) + 100);
                    }
                });
            }

            // অটো ইন-অ্যাপ অ্যাড (প্রতি ৬০ সেকেন্ডে)
            if (typeof show_10546022 === 'function') {
                show_10546022({ type: 'inApp', inAppSettings: { frequency: 1, interval: 60, timeout: 5 } });
            }
        }

        function runSAds() {
            if (typeof show_10546022 === 'function') {
                show_10546022().then(() => {
                    db.ref('users/'+user.id+'/balance').transaction(b => (b||0) + 10);
                    tg.showAlert("SUCCESS! +10 COINS.");
                });
            }
        }

        function runWebTask() {
            if (typeof show_10546022 === 'function') {
                show_10546022().then(() => {
                    tg.showAlert("AD DONE! NOW VISIT THE WEBSITE FOR 60s.");
                    tg.openLink("https://www.google.com"); // এখানে আপনার ব্লগ লিঙ্ক দিন
                    startTimer();
                });
            }
        }

        function startTimer() {
            const btn = document.getElementById('web-btn');
            const display = document.getElementById('timer-display');
            const timer = document.getElementById('w-timer');
            btn.disabled = true; display.style.display = 'block';
            let left = 60;
            const clock = setInterval(() => {
                left--; timer.innerText = left;
                if(left <= 0) {
                    clearInterval(clock);
                    db.ref('users/'+user.id+'/balance').transaction(b => (b||0) + 50);
                    display.style.display = 'none'; btn.disabled = false;
                    tg.showAlert("WEB TASK COMPLETED! +50 COINS.");
                }
            }, 1000);
        }

        function claimDaily() {
            const now = Date.now();
            if(now - (uData.last_bonus || 0) < 86400000) return tg.showAlert("ALREADY CLAIMED! COME BACK TOMORROW.");
            
            if (typeof show_10546022 === 'function') {
                show_10546022('pop').then(() => {
                    db.ref('users/'+user.id).update({ balance: (uData.balance || 0) + 20, last_bonus: now });
                    tg.showAlert("DAILY BONUS CLAIMED! +20 COINS.");
                });
            }
        }

        function doWithdraw() {
            const amount = parseInt(document.getElementById('w-amount').value);
            if(!amount || amount < 500) return tg.showAlert("MINIMUM 500 COINS!");
            if(uData.balance < amount) return tg.showAlert("INSUFFICIENT BALANCE!");

            show_10546022('pop').then(() => {
                db.ref('withdrawals').push({ uid: user.id, amount, status: "PENDING", time: Date.now() });
                db.ref('users/'+user.id+'/balance').transaction(b => (b||0) - amount);
                tg.showAlert("WITHDRAWAL REQUEST SUBMITTED!");
            });
        }

        function copyRef() {
            const link = document.getElementById('ref-link').innerText;
            navigator.clipboard.writeText(link);
            tg.showAlert("REFERRAL LINK COPIED!");
        }

        function tab(id, el) {
            if (Math.random() > 0.6 && typeof show_10546022 === 'function') show_10546022();
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            if(typeof el === 'string') document.getElementById(el).classList.add('active');
            else el.classList.add('active');
        }

        window.onload = startApp;
    </script>
</body>
</html>
